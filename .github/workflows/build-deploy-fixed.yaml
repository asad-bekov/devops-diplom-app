- name: Login to Yandex Container Registry
  run: |
    echo "=== Method: Using yc CLI ==="
    
    # Устанавливаем yc в /tmp вместо /usr/local
    curl -s https://storage.yandexcloud.net/yandexcloud-yc/install.sh | \
      bash -s -- -i /tmp/yc-install -n
    
    # Добавляем в PATH
    export PATH="/tmp/yc-install/bin:$PATH"
    
    # Создаем файл с ключом
    cat << 'YC_KEY' > /tmp/yc-key.json
    ${{ secrets.YC_SA_KEY }}
    YC_KEY
    
    # Настраиваем yc
    yc config set service-account-key /tmp/yc-key.json
    yc config set cloud-id b1gm0hnoge59gnkmh3dl
    yc config set folder-id b1gm0hnoge59gnkmh3dl
    
    # Настраиваем docker
    yc container registry configure-docker
    
    echo "✅ Docker configured for Yandex Cloud"
